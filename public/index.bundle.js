!function(e){function t(t){for(var a,s,o=t[0],c=t[1],l=t[2],m=0,f=[];m<o.length;m++)s=o[m],r[s]&&f.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);f.length;)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={1:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([53,0]),n()}({52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(6),s=n.n(i),o=n(3),c=n.n(o),l=n(15),u=n.n(l);var m=function(e){return r.a.createElement("h1",null,e.title)};var f=function(e){return r.a.createElement("label",null,r.a.createElement("p",null,e.text?e.text:""),r.a.createElement("input",{type:e.inputType,placeholder:e.text?e.text:"",defaultValue:e.inputValue?e.inputValue:"",id:e.idElem?e.idElem:""}))};var p=function(e){return r.a.createElement("button",null,e.children)};var d=function(e){return r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=document.getElementById("numCards"),a=document.getElementById("numSec");e.passParam(n.value,a.value)}},r.a.createElement(f,{idElem:"numCards",text:"Введите количество карт:",inputType:"text",inputValue:"12"}),r.a.createElement(f,{idElem:"numSec",text:"Введите время на игру в секундах:",inputType:"text",inputValue:"60"}),r.a.createElement(p,{type:"submit"},"Играть"))};var v=function(e){return r.a.createElement("section",null,r.a.createElement("div",{className:"memoji-desc"},"В игре Memoji есть колода карточек с парными изображениями. Колода раскладывается в случайном порядке рубашкой вверх. Игрок может открывать 2 карточки за один ход. Если при открытии карт образовалась «парочка», она остаётся открытой. Игра продолжается, пока не будет открыто всё поле."),r.a.createElement(d,{passParam:function(t,n){e.startGame(t,n)}}))};var E=function(e){return r.a.createElement("li",{onClick:function(t){var n=t.target.parentNode;n.classList.contains("opened")||n.classList.contains("freeze")||n.classList.contains("freezeErr")||e.clickPass(t.target)},"data-position":e.position,className:"\n        ".concat(e.opened?"opened":""," \n        ").concat(e.freeze?"freeze":""," \n        ").concat(e.freezeErr?"freezeErr":""," \n      ")},r.a.createElement("div",{className:"shirt"}),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.img?e.img:""},className:"emotion"}))};var h=function(e){return r.a.createElement("div",{className:"timer",id:"timer"},"0".concat(e.minutes,": ").concat(e.seconds>9?e.seconds:"0"+e.seconds))};var y=function(e){var t=function(t){e.handleClick(t)};return r.a.createElement("section",null,r.a.createElement("ul",{id:"field","data-game-id":e.gameID},e.cards.map(function(e){return r.a.createElement(E,{clickPass:t,key:e.position,position:e.position,img:e.image?e.image:"",opened:e.opened,freeze:e.freeze,freezeErr:e.freezeErr})})),r.a.createElement(h,{minutes:e.minutes,seconds:e.seconds}))};var g=function(e){return r.a.createElement("div",{className:"window-err"},e.errMess)};var b=function(e){return r.a.createElement("div",{className:"windowWinWrap",id:"windowWinWrap"},r.a.createElement("div",{id:"windowWin",className:"windowWin"},r.a.createElement("h2",null,r.a.createElement("span",{className:"win"},"W"),r.a.createElement("span",{className:"win"},"i"),r.a.createElement("span",{className:"win"},"n")),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=document.getElementById("numCards"),a=document.getElementById("numSec");e.startGame(n.value,a.value)}},r.a.createElement(f,{idElem:"numCards",text:"Введите количество карт:",inputType:"text",inputValue:"12"}),r.a.createElement(f,{idElem:"numSec",text:"Введите время на игру в секундах:",inputType:"text",inputValue:"60"}),r.a.createElement(p,{type:"submit"},"Играть ещё раз"))))};var w=function(e){return r.a.createElement("div",{className:"windowWinWrap",id:"windowWinWrap"},r.a.createElement("div",{id:"windowWin",className:"windowWin"},r.a.createElement("h2",null,r.a.createElement("span",{className:"lose"},"L"),r.a.createElement("span",{className:"lose"},"o"),r.a.createElement("span",{className:"lose"},"s"),r.a.createElement("span",{className:"lose"},"e")),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=document.getElementById("numCards"),a=document.getElementById("numSec");e.startGame(n.value,a.value)}},r.a.createElement(f,{idElem:"numCards",text:"Введите количество карт:",inputType:"text",inputValue:"12"}),r.a.createElement(f,{idElem:"numSec",text:"Введите время на игру в секундах:",inputType:"text",inputValue:"60"}),r.a.createElement(p,{type:"submit"},"Играть ещё раз"))))};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?M(e):t}(this,x(t).call(this,e))).state={page:"start",cards:null,sec:null,errMess:!1,gameID:null,win:!1,lose:!1,minutes:null,seconds:null},n.startGame=n.startGame.bind(M(M(n))),n.flip=n.flip.bind(M(M(n))),n.tick=n.tick.bind(M(M(n))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,r.a.Component),function(e,t,n){t&&I(e.prototype,t),n&&I(e,n)}(t,[{key:"startGame",value:function(e,t){var n=this,a={cards:e,sec:t};c.a.post("/game",a).then(function(e){return e.data}).then(function(e){if(e.err)return n.setState({errMess:e.errMess}),void n.setState({errMess:!1});window.history.pushState(null,null,"game"),n.setState({errMess:!1,page:"game",gameID:e.gameID,cards:e.cards,sec:e.sec,win:e.win,lose:e.lose,minutes:n.getMinutes(e.sec),seconds:n.getSeconds(e.sec)}),n.interval=setInterval(n.tick,1e3)}).catch(function(e){return console.error(e.message)})}},{key:"flip",value:function(e){var t=this;if("DIV"===e.tagName){var n={position:e.parentNode.dataset.position,gameID:this.state.gameID};c.a.post("/flip",n).then(function(e){return e.data}).then(function(e){!0===e.win&&clearInterval(t.interval),t.setState({cards:e.cards,win:e.win,lose:e.lose})}).catch(function(e){return console.error(e.message)})}}},{key:"getMinutes",value:function(e){return Math.floor(e/60)}},{key:"getSeconds",value:function(e){return e%60}},{key:"tick",value:function(){var e=this;if(this.state.sec>-1){var t=Math.floor(this.state.sec/60),n=this.state.sec%60;this.setState({sec:this.state.sec-1,minutes:t,seconds:n})}else if(this.state.gameID){var a={lose:!0,gameID:this.state.gameID};c.a.post("/flip",a).then(function(e){return e.data}).then(function(t){e.setState({lose:t.lose}),clearInterval(e.interval)}).catch(function(e){return console.error(e.message)})}}},{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement(u.a,{component:"section",transitionName:"slide",transitionEnterTimeout:5e3,transitionLeaveTimeout:0},this.state.errMess?r.a.createElement(g,{errMess:this.state.errMess}):""),r.a.createElement(m,{title:"Memoji"}),"start"===this.state.page?r.a.createElement(v,{startGame:this.startGame}):r.a.createElement(y,{handleClick:this.flip,gameID:this.state.gameID,cards:this.state.cards,minutes:this.state.minutes,seconds:this.state.seconds}),this.state.win?r.a.createElement(b,{startGame:this.startGame}):"",this.state.lose?r.a.createElement(w,{startGame:this.startGame}):"")}}]),t}();n(52);s.a.render(r.a.createElement(k,null),document.getElementById("app"))}});
//# sourceMappingURL=index.bundle.js.map